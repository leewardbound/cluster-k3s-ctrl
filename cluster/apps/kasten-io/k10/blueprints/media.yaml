---
apiVersion: cr.kanister.io/v1alpha1
kind: Blueprint
metadata:
  name: media
  namespace: kasten-io
actions:
  post-export:
    phases:
      - func: KubeTask
        name: hookPhase
        args:
          namespace: kasten-io
          #image: ghcr.io/k8s-at-home/rclone:v1.57.0
          image: gcr.io/google-containers/ubuntu-slim:0.14
          podOverride:
            containers:
              - name: container
                imagePullPolicy: IfNotPresent
                env:
                  - name: TZ
                    value: "${TIMEZONE}"
                volumeMounts:
                  #- name: rclone-conf
                    #mountPath: /config
                  - name: k10-backups
                    mountPath: /mnt/k10-backups
            volumes:
              - name: rclone-conf
                secret:
                  secretName: rclone-conf
              - name: k10-backups
                persistentVolumeClaim:
                  claimName: k10-backups
          command:
            - "sleep"
            - "600"
